<div class="row posting" ng-repeat=" post in postings.allPostings | orderBy: '-' + nav.sort | filter:searchText ">
    <div class="col-md-12 well">

        <div class="row">

            <div class="col-md-3 imageSpace">
                <img ng-src="{{ post.image_url }}" alt="{{ post.title }}"/>
            </div>

            <div class="col-md-9">

                <h3>
                    <span ng-bind="post.title"></span>
                    |
                    <a href="#" onclick="return false;" ng-click="postings.voteUp(post)">
                        <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                    </a>
                    <a href="#" onclick="return false;" ng-click="postings.voteDown(post)">
                        <span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
                    </a>
                    <span ng-bind="post.votes" ng-class="{green: post.votes > 0, red: post.votes < 0, black: post.votes === 0}"></span>
                </h3>

                <h4 class="text-right">By:
                    <span ng-bind="post.first_name"></span> <span ng-bind="post.last_name"></span>
                </h4>

                <p>
                    <span ng-bind="post.posting"></span>
                </p>

                <h5>
                    <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
                    <time title="{{ post.created_at | amDateFormat: 'dddd, MMMM Do YYYY, h:mm a' }}">
                        {{ post.created_at | amCalendar }}
                    </time>
                    |
                    <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
                    <a href="#" onclick="return false;" ng-click="showComments(post)">
                        <span ng-bind="commentCount.length"></span>
                        <ng-pluralize count="commentCount.length" when="{'one': 'comment', 'other': 'comments'}"></ng-pluralize>
                    </a>
                    |
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    <a href="#" onclick="return false;" ng-click="showAddComment(post)">Add Comment</a>
                </h5>

                <div ng-show="true">

                    <form class="form-inline"
                          name="addComment"
                          ng-submit="addComment.$valid && postings.addNewComment({newComment: postings.newComment, post_id: post.id})">

                        <div class="form-group" ng-class="{ 'has-error' : addComment.author.$invalid && addComment.author.$touched }">
                            <label for="author">Author:</label>
                            <input  type="text"
                                    class="form-control"
                                    id="author"
                                    name="author"
                                    ng-model="postings.newComment.author_id"
                                    disabled
                                    required>
                            <h6 class="help-block text-right" ng-show="addComment.author.$invalid && addComment.author.$touched">
                                Author is required.
                            </h6>
                        </div>

                        <div class="form-group" ng-class="{ 'has-error' : addComment.comment.$invalid && addComment.comment.$touched }">
                            <label for="comment">Comment:</label>
                            <input  type="text"
                                    class="form-control"
                                    id="comment"
                                    placeholder="Your comment ..."
                                    name="comment"
                                    ng-model="postings.newComment.comment"
                                    required>
                            <h6 class="help-block text-right" ng-show="addComment.comment.$invalid && addComment.comment.$touched">
                                Comment is required.
                            </h6>
                        </div>

                        <button type="submit" class="btn btn-default" ng-disabled="addComment.$invalid">
                                Add Comment
                        </button>

                    </form>

                </div>

                <div ng-show="true">
                    <span ng-repeat=" comment in postings.allComments | filter : { 'posting_id': post.id } : true as commentCount ">
                        <p>
                            <strong>
                                {{ comment.first_name }} {{ comment.last_name }}:
                            </strong>
                            {{ comment.comment }}
                        </p>
                    </span>
                </div>

            </div>

        </div>

    </div>
</div>
